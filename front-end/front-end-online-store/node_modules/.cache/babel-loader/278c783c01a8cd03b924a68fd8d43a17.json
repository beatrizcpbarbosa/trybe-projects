{"ast":null,"code":"var _jsxFileName = \"/Users/beatrizbarbosa/Projects/trybe-projects/sd-010-a-project-frontend-online-store/src/App.js\";\nimport React, { Component } from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport Home from './pages/Home';\nimport ShoppingCart from './pages/ShoppingCart';\nimport ProductDetails from './pages/ProductDetails';\nimport Checkout from './pages/Checkout';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.addToCart = (id, productInfo) => {\n      this.setState(({\n        cartItems\n      }) => ({\n        cartItems: { ...cartItems,\n          [id]: productInfo\n        }\n      }), () => {\n        this.sumTotalProducts();\n        this.setLocalStorage();\n      });\n    };\n\n    this.setLocalStorage = () => {\n      const {\n        cartItems\n      } = this.state;\n      localStorage.setItem('cartItems', JSON.stringify(cartItems));\n    };\n\n    this.getLocalStorage = () => {\n      const cartItems = JSON.parse(localStorage.getItem('cartItems'));\n\n      if (cartItems) {\n        this.setState({\n          cartItems\n        });\n      }\n    };\n\n    this.sumTotalProducts = () => {\n      const {\n        cartItems\n      } = this.state;\n      const totalCount = Object.values(cartItems).reduce((a, b) => a + b.amount, 0);\n      this.setState({\n        totalCount\n      });\n    };\n\n    this.freeShipping = product => {\n      const {\n        shipping\n      } = product;\n      const freeShipping = shipping.free_shipping;\n      if (freeShipping) return /*#__PURE__*/React.createElement(\"div\", {\n        \"data-testid\": \"free-shipping\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 31\n        }\n      }, \"Frete Gr\\xE1tis\");\n    };\n\n    this.state = {\n      cartItems: {},\n      totalCount: 0\n    };\n  }\n\n  componentDidMount() {\n    this.getLocalStorage();\n  }\n\n  render() {\n    const {\n      cartItems,\n      totalCount\n    } = this.state;\n    return /*#__PURE__*/React.createElement(BrowserRouter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => /*#__PURE__*/React.createElement(Home, {\n        addToCart: this.addToCart,\n        cartItems: cartItems,\n        totalCount: totalCount,\n        freeShipping: this.freeShipping,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 15\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/shoppingcart\",\n      render: () => /*#__PURE__*/React.createElement(ShoppingCart, {\n        setLocalStorage: this.setLocalStorage,\n        cartItems: cartItems,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/checkout\",\n      render: () => /*#__PURE__*/React.createElement(Checkout, {\n        cartItems: cartItems,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 28\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/:title\",\n      render: props => /*#__PURE__*/React.createElement(ProductDetails, Object.assign({\n        addToCart: this.addToCart,\n        cartItems: cartItems,\n        totalCount: totalCount,\n        freeShipping: this.freeShipping\n      }, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/beatrizbarbosa/Projects/trybe-projects/sd-010-a-project-frontend-online-store/src/App.js"],"names":["React","Component","BrowserRouter","Route","Switch","Home","ShoppingCart","ProductDetails","Checkout","App","constructor","props","addToCart","id","productInfo","setState","cartItems","sumTotalProducts","setLocalStorage","state","localStorage","setItem","JSON","stringify","getLocalStorage","parse","getItem","totalCount","Object","values","reduce","a","b","amount","freeShipping","product","shipping","free_shipping","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport Home from './pages/Home';\nimport ShoppingCart from './pages/ShoppingCart';\nimport ProductDetails from './pages/ProductDetails';\nimport Checkout from './pages/Checkout';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cartItems: {},\n      totalCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    this.getLocalStorage();\n  }\n\n  addToCart = (id, productInfo) => {\n    this.setState(\n      ({ cartItems }) => ({\n        cartItems: { ...cartItems, [id]: productInfo },\n      }),\n      () => {\n        this.sumTotalProducts();\n        this.setLocalStorage();\n      },\n    );\n  };\n\n  setLocalStorage = () => {\n    const { cartItems } = this.state;\n    localStorage.setItem('cartItems', JSON.stringify(cartItems));\n  };\n\n  getLocalStorage = () => {\n    const cartItems = JSON.parse(localStorage.getItem('cartItems'));\n    if (cartItems) {\n      this.setState({ cartItems });\n    }\n  };\n\n  sumTotalProducts = () => {\n    const { cartItems } = this.state;\n    const totalCount = Object.values(cartItems).reduce(\n      (a, b) => a + b.amount,\n      0,\n    );\n    this.setState({ totalCount });\n  };\n\n  freeShipping = (product) => {\n    const { shipping } = product;\n    const freeShipping = shipping.free_shipping;\n    if (freeShipping) return (<div data-testid=\"free-shipping\">Frete Gr√°tis</div>);\n  }\n\n  render() {\n    const { cartItems, totalCount } = this.state;\n\n    return (\n      <BrowserRouter>\n        <Switch>\n          <Route\n            exact\n            path=\"/\"\n            render={ () => (\n              <Home\n                addToCart={ this.addToCart }\n                cartItems={ cartItems }\n                totalCount={ totalCount }\n                freeShipping={ this.freeShipping }\n              />\n            ) }\n          />\n          <Route\n            path=\"/shoppingcart\"\n            render={ () => (\n              <ShoppingCart\n                setLocalStorage={ this.setLocalStorage }\n                cartItems={ cartItems }\n              />\n            ) }\n          />\n          <Route\n            path=\"/checkout\"\n            render={ () => <Checkout cartItems={ cartItems } /> }\n          />\n          <Route\n            path=\"/:title\"\n            render={ (props) => (\n              <ProductDetails\n                addToCart={ this.addToCart }\n                cartItems={ cartItems }\n                totalCount={ totalCount }\n                freeShipping={ this.freeShipping }\n                { ...props }\n              />\n            ) }\n          />\n        </Switch>\n      </BrowserRouter>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}